<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Browse Books</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="books.css" />
  <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="/css/responsive.css">

</head>

<body>
  <!-- ========================NavBar Start=========================== -->

  <div class="navbar-container">
    <div class="logo">
      <img src="/assets/Seminar Library Logo (Without BG).png" srcset="">
    </div>

    <div class="items">
      <ul>
        <li>
          <div class="search-container">
            <input type="text" class="search-input" placeholder="Search...">
            <i class="fa fa-search nav-search-icon"></i>
          </div>
        </li>
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/book">Books</a></li>
        <li><a href="/donate">Donate</a></li>
        <li>
          <button class="cart-icon" id="cart-icon" onclick="window.location.href='/checkout'">
            <i class="fas fa-list-check" style="font-size: 20px;"></i>
            <span class="cart-count" id="cart-count">0</span>
          </button>
        </li>
        <li><button class="login-btn" onclick="window.location.href='/login' ">Login</button>
        </li>
      </ul>
    </div>

    <div class="mobile-menu-btn-container">
      <div class="search-container">
        <input type="text" class="mobile-search-input" placeholder="Search Books...">
        <i class="fa fa-search nav-search-icon" onclick="openSearch()" id="search-icon" style="font-size: 20px; ">
        </i>
      </div>
      <button class="mobile-cart-icon" id="mobile-cart-icon" onclick="window.location.href='/checkout'">
        <i class="fa fa-list-check" style="font-size: 20px;"></i>
        <span class="mobile-cart-count" id="mobile-cart-count">0</span>
      </button>
      <button class="mobile-menu-btn" onclick="openNav()">
        <i class="fa fa-bars"></i>
      </button>
    </div>
    <div class="overlay" id="overlay"></div>
    <div id="nav-sidebar" class="nav-sidebar">
      <button class="close-btn" onclick="closeNav()">&times;</button>
      <div class="sidebar-content">
        <div class="user-profile">
          <div class="image"><img src="/assets/review1.png" alt="" srcset=""></div>
          <div class="name-and-view-profile">
            <div class="name">Md Mehedi Hasan</div>
            <div class="view-profile"><a href="#">View Profile ></a></div>
          </div>
        </div>
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/book">Books</a>
        <a href="/donate">Donate</a>
        <button class="mobile-login-btn" onclick="window.location.href='/login'"><span><i
              class="fas fa-sign-in-alt"></i></span>&nbsp;Login</button>
        <button class="mobile-logout-btn"><span><i class="fas fa-sign-out-alt"></i></span>&nbsp;Log Out</button>
      </div>
    </div>
  </div>

  <!-- =============== Cart Start ================ -->
  <div class="cartOverlay" id="cartOverlay"></div>
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="header">
            <img src="/assets/Your Cart.png" width="50px" alt="" srcset="">
            <div class="close-cart" id="close-cart"><i class="fas fa-times"></i></div>
        </div>
        <div class="cart-content">
            <div class="empty-cart">
                <h2>Your Checklist is Empty</h2>
                <img src="/assets/empty-cart.png" alt="" srcset="">
            </div>
            <div class="item-container" id="item-container">
                <div class="image-and-details">
                    <div class="image"></div>
                    <div class="details">
                        <h4 class="book-title"></h4>
                        <p class="book-author"></p>
                    </div>
                </div>
                <div class="remove">Remove</div>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total Books:</span>
                <p id="cart-total">0</p>
            </div>
            <button class="proceed-btn" onclick="window.location.href='/checkout/checkout.html'">Proceed to Checkout</button>
        </div>
    </div>
  <!-- ===============Navbar End====================== -->
  <header class="header">
    <h1>ðŸ“š Browse Books</h1>
    <p>Explore our collection of academic and leisure reading materials from ICE RU.</p>
  </header>

  <div class="container" id="mainContent">
    <aside class="sidebar" aria-label="Book Filters">
      <section class="search">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="Search by book or author name" aria-label="Search Books">
          <i class="fa fa-search search-icon"></i>
        </div>
      </section>

      <nav class="categories desktop-categories">
        <h3>Categories</h3>
        <ul>
          <li class="selected">All Books</li>
          <li>Data Communication and Networking</li>
          <li>Programming and Algorithms</li>
          <li>Artificial Intelligence</li>
          <li>Digital Signal Processing</li>
        </ul>
      </nav>

      <div class="mobile-categories">
        <select id="mobileCategory" aria-label="Select Book Category" class="mobile-category-select">
          <option value="All Books" selected>All Books</option>
          <option value="Data Communication and Networking">Data Communication and Networking</option>
          <option value="Programming and Algorithms">Programming and Algorithms</option>
          <option value="Artificial Intelligence">Artificial Intelligence</option>
          <option value="Digital Signal Processing">Digital Signal Processing</option>
        </select>
      </div>
    </aside>

    <main class="main">
      <div class="book-grid" id="bookGrid"></div>
      <div class="pagination" id="pagination"></div>
    </main>
  </div>


  <button class="dark-toggle" aria-label="Toggle dark mode">ðŸŒ“</button>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const categoryItems = document.querySelectorAll('.desktop-categories li');
      const searchInput = document.querySelector('#searchInput');
      const bookGrid = document.querySelector('#bookGrid');
      const pagination = document.getElementById('pagination');
      const mobileCategory = document.getElementById('mobileCategory');
      let currentPage = 1, booksPerPage = 8;

      const books = [
        {
          title: "Computer Networks",
          author: "Andrew S. Tanenbaum",
          category: "Data Communication and Networking",
          available: true,
          coverImage: "network.jpeg",
          readPath: "network.pdf",
          downloadPath: "network.pdf"
        },
        {
          title: "Power of Artificial Intelligence",
          author: "Youth Boytbl",
          category: "Artificial Intelligence",
          available: true,
          coverImage: "ai.jpg",
          readPath: "ai.pdf",
          downloadPath: "ai.pdf"
        },
        {
          title: "Programming and Algorithm: An Introduction",
          author: "Guttaman,Anthony J.",
          category: "Programming and Algorithms",
          available: false,
          coverImage: "algo.jpg",
          readPath: "algo.pdf",
          downloadPath: "algo.pdf"
        },
        {
          title: "Digital Communication",
          author: "R.N Mutagi",
          category: "Digital Signal Processing",
          available: true,
          coverImage: "dsp.jpg",
          readPath: "dsp.pdf",
          downloadPath: "dsp.pdf"
        }
      ];

      function paginate(data, page) {
        const start = (page - 1) * booksPerPage;
        return data.slice(start, start + booksPerPage);
      }

      function renderBooks(data) {
        bookGrid.innerHTML = '';
        paginate(data, currentPage).forEach(book => {
          const card = document.createElement('div');
          card.className = 'book-card';
          card.setAttribute('data-category', book.category);
          card.innerHTML = `
            <img src="/images/${book.coverImage}" alt="Book Cover"
            onerror="this.src='/images/default.jpg'">
            <div class="info">
              <h4>${book.title}</h4>
              <p>${book.author}</p>
              <div class="status-row">
                <span class="badge ${book.available ? 'available' : 'unavailable'}">
                  ${book.available ? 'Available' : 'Unavailable'}
                </span>
                ${book.available ? `<button class="borrow-btn" onclick="addToCart(this)">Borrow</button>` : ''}
              </div>
              <div class="actions">
                ${book.available ? `
                  <a href="public/books/${book.readPath}" class="btn" target="_blank">Read</a>
                  <a href="public/books/${book.downloadPath}" class="btn" download>Download</a>` : ''}
              </div>
            </div>`;
          bookGrid.appendChild(card);
        });
      }

      function renderPagination(data) {
        const totalPages = Math.ceil(data.length / booksPerPage);
        pagination.innerHTML = '';
        for (let i = 1; i <= totalPages; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          if (i === currentPage) btn.classList.add('active');
          btn.addEventListener('click', () => {
            currentPage = i;
            renderBooks(data);
            renderPagination(data);
          });
          pagination.appendChild(btn);
        }
      }

      function filterBooks(selectedCategory) {
        const filtered = selectedCategory === 'All Books' ? books : books.filter(book =>
          book.category.includes(selectedCategory)
        );
        currentPage = 1;
        searchInput.value = '';
        renderBooks(filtered);
        renderPagination(filtered);
      }

      categoryItems.forEach(category => {
        category.addEventListener('click', () => {
          const selectedCategory = category.textContent.trim();
          categoryItems.forEach(c => c.classList.remove('selected'));
          category.classList.add('selected');
          mobileCategory.value = selectedCategory;
          filterBooks(selectedCategory);
        });
      });

      mobileCategory.addEventListener('change', () => {
        const selectedCategory = mobileCategory.value;
        categoryItems.forEach(c => {
          c.classList.remove('selected');
          if (c.textContent.trim() === selectedCategory) {
            c.classList.add('selected');
          }
        });
        filterBooks(selectedCategory);
      });

      searchInput.addEventListener('input', () => {
        const query = searchInput.value.toLowerCase().trim();
        const filtered = books.filter(book =>
          book.title.toLowerCase().includes(query) ||
          book.author.toLowerCase().includes(query)
        );
        currentPage = 1;
        renderBooks(filtered);
        renderPagination(filtered);
      });

      document.querySelector('.dark-toggle').addEventListener('click', () => {
        document.body.classList.toggle('dark');
        localStorage.setItem('dark-mode', document.body.classList.contains('dark'));
      });

      if (localStorage.getItem('dark-mode') === 'true') {
        document.body.classList.add('dark');
      }

      // Initial load
      renderBooks(books);
      renderPagination(books);
    });
  </script>

  <!-- ========Footer Start ================= -->
  <footer class="footer">
    <div class="footer-container">

      <div class="footer-section">
        <h2>About Us</h2>
        <p>The Seminar Library of ICE, RU provides access to academic resources that support research and
          learning for students and faculty.</p>
      </div>

      <div class="footer-section">
        <h2>Quick Links</h2>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/book">Browse Books</a></li>
          <li><a href="/login">Login</a></li>
          <li><a href="/book">Request a Book</a></li>
          <li><a href="#">Contact Us</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h2>Contact Info</h2>
        <ul>
          <li>ICE Dept, University of Rajshahi</li>
          <li>Email: <a href="mailto:ice.library@ru.ac.bd">ice.library@ru.ac.bd</a></li>
          <li>Phone: 017XXXXXXXX</li>
          <li>M.A Wazed Mia Academic Building, University of Rajshahi</li>
        </ul>
      </div>

      <div class="footer-section">
        <h2>Connect</h2>
        <ul>
          <li><a href="https://www.ru.ac.bd/ice/">ICE Dept Website</a></li>
          <li><a href="https://www.ru.ac.bd/">RU Official Site</a></li>
          <li><a href="https://web.facebook.com/groups/408338792613622">Facebook Page</a></li>
        </ul>
      </div>

    </div>

    <div class="footer-bottom">
      <p>Â© 2025 ICE Seminar Library, RU. Designed by Mehedi.</p>
    </div>
  </footer>
  <!-- =========Footer End============== -->
  <script src="common.js"></script>
  <!-- <script src="books.js"></script> -->
</body>

</html>