<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup | Seminar Library</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="signup.css">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="/css/responsive.css">
</head>

<body>
    <!-- =================NavBar Start================ -->
    <div class="navbar-container">
        <div class="logo">
            <a href="/"><img src="/assets/Seminar Library Logo (Without BG).png" srcset=""></a>
        </div>

        <div class="items">
            <ul>
                <li>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Search...">
                        <i class="fa fa-search search-icon"></i>
                    </div>
                </li>
                <li><a href="/">Home</a></li>
                <li><a href="/about/about.html">About</a></li>
                <li><a href="/book/books.html">Books</a></li>
                <li><a href="/donate/donate.html">Donate</a></li>
                <li>
                    <button class="cart-icon" id="cart-icon" onclick="window.location.href='/checkout/checkout.html'">
                        <i class="fas fa-list-check" style="font-size: 20px;"></i>
                        <span class="cart-count" id="cart-count">0</span>
                    </button>
                </li>
                <li><button class="login-btn" onclick="window.location.href='/authentication/login/login.html' ">Login</button>
                </li>
                <!-- <li>
                    <div class="profile-dropdown">
                        <div class="profile-icon">
                            <img src="/assets/review1.png" alt="Profile">
                        </div>
                        <div class="dropdown-content">
                            <a href="#">My Profile</a>
                            <a href="#">Settings</a>
                            <a href="" class="logout"><button class="mobile-logout-btn"><span><i
                                            class="fas fa-sign-out-alt"></i></span>&nbsp;Log Out</button></a>
                        </div>
                    </div>
                </li> -->
            </ul>
        </div>

        <div class="mobile-menu-btn-container">
            <div class="search-container">
                <input type="text" class="mobile-search-input" placeholder="Search Books...">
                <i class="fa fa-search search-icon" onclick="openSearch()" id="search-icon" style="font-size: 20px; ">
                </i>
            </div>
            <button class="mobile-cart-icon" id="mobile-cart-icon" onclick="window.location.href='/checkout/checkout.html'">
                <i class="fa fa-list-check" style="font-size: 20px;"></i>
                <span class="mobile-cart-count" id="mobile-cart-count">0</span>
            </button>
            <button class="mobile-menu-btn" onclick="openNav()">
                <i class="fa fa-bars"></i>
            </button>
        </div>

        <!-- Sidebar -->
        <div class="overlay" id="overlay"></div>
        <div id="sidebar" class="sidebar">
            <button class="close-btn" onclick="closeNav()">&times;</button>
            <div class="sidebar-content">
                <div class="user-profile">
                    <div class="image"><img src="/assets/review1.png" alt="" srcset=""></div>
                    <div class="name-and-view-profile">
                        <div class="name">Md Mehedi Hasan</div>
                        <div class="view-profile"><a href="#">View Profile ></a></div>
                    </div>
                </div>
                <a href="/">Home</a>
                <a href="/about/about.html">About</a>
                <a href="/book/books.html">Books</a>
                <a href="/donate/donate.html">Donate</a>
                <button class="mobile-login-btn"><span><i class="fas fa-sign-in-alt"></i></span>&nbsp;Login</button>
                <button class="mobile-logout-btn"><span><i class="fas fa-sign-out-alt"></i></span>&nbsp;Log Out</button>
            </div>
        </div>
        <!-- =============== Cart Start ================ -->
        <div class="cartOverlay" id="cartOverlay"></div>
        <div class="cart-sidebar" id="cart-sidebar">
            <div class="header">
                <img src="/assets/Your Cart.png" width="50px" alt="" srcset="">
                <div class="close-cart" id="close-cart"><i class="fas fa-times"></i></div>
            </div>
            <div class="cart-content">
                <div class="empty-cart">
                    <h2>Your Checklist is Empty</h2>
                    <img src="/assets/empty-cart.png" alt="" srcset="">
                </div>
                <div class="item-container" id="item-container">
                    <div class="image-and-details">
                        <div class="image"></div>
                        <div class="details">
                            <h4 class="book-title"></h4>
                            <p class="book-author"></p>
                        </div>
                    </div>
                    <div class="remove">Remove</div>
                </div>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total Books:</span>
                    <p id="cart-total">0</p>
                </div>
                <button class="proceed-btn" onclick="window.location.href='/checkout/checkout.html'">Proceed to Checkout</button>
            </div>
        </div>
    </div>
    <!-- ===============Navbar End====================== -->

    <div class="container">
        <div class="logo" style="display: flex; justify-content: center;">
            <a href="\index.html"><img src="Seminar Library Logo (Without BG).png" width="80px"
                    style="text-align: center;" alt="" srcset=""></a>
        </div>
        <form id="signup-form" class="signup-form">
            <h2>Create Account</h2>
            <p>Fill in your details to create an account</p>
            <div id="signup-error" style="color: red;"></div>
            <div class="form-group">
                <label for="first-name">First Name</label>
                <input type="text" id="first-name" required>
            </div>
            <div class="form-group">
                <label for="last-name">Last Name</label>
                <input type="text" id="last-name" required>
            </div>
            <div class="form-group">
                <label for="signup-email">Email</label>
                <input type="email" id="signup-email" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" required>
            </div>
            <div class="form-group">
                <label for="phone">Student ID</label>
                <input type="number" id="student_id" required>
            </div>
            <div class="form-group">
                <label for="session">Session</label>
                <input type="text" id="session" required>
            </div>
            <div class="form-group">
                <label for="gender">Gender</label>
                <select id="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="signup-password">Password</label>
                <input type="password" id="signup-password" required>
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <input type="password" id="confirm-password" required>
            </div>
            <button type="submit">Sign Up</button>
            <div class="toggle-form">
                Already have an account? <a href="/authentication/login/login.html" id="show-login">Login</a>
            </div>
            <div id="spinner-overlay">
                <div class="spinner" id="spinner"></div>
            </div>
        </form>
    </div>

    
    <!-- ========Footer Start ================= -->
    <footer class="footer">
        <div class="footer-container">

            <!-- About -->
            <div class="footer-section">
                <h2>About Us</h2>
                <p>The Seminar Library of ICE, RU provides access to academic resources that support research and
                    learning for students and faculty.</p>
            </div>

            <!-- Quick Links -->
            <div class="footer-section">
                <h2>Quick Links</h2>
                <ul>
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/book/books.html">Browse Books</a></li>
                    <li><a href="/authentication/login/login.html">Login</a></li>
                    <li><a href="/book/books.html">Request a Book</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>

            <!-- Contact -->
            <div class="footer-section">
                <h2>Contact Info</h2>
                <ul>
                    <li>ICE Dept, University of Rajshahi</li>
                    <li>Email: <a href="mailto:ice.library@ru.ac.bd">ice.library@ru.ac.bd</a></li>
                    <li>Phone: 017XXXXXXXX</li>
                    <li>M.A Wazed Mia Academic Building, University of Rajshahi</li>
                </ul>
            </div>

            <!-- External Links -->
            <div class="footer-section">
                <h2>Connect</h2>
                <ul>
                    <li><a href="https://www.ru.ac.bd/ice/">ICE Dept Website</a></li>
                    <li><a href="https://www.ru.ac.bd/">RU Official Site</a></li>
                    <li><a href="https://web.facebook.com/groups/408338792613622">Facebook Page</a></li>
                </ul>
            </div>

        </div>

        <div class="footer-bottom">
            <p>© 2025 ICE Seminar Library, RU. Designed by Mehedi.</p>
        </div>
    </footer>
    <!-- =========Footer End============== -->

    <script type="module">
        import { auth, db } from '../config/firebase-config.js';
        import { createUserWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const errorElement = document.getElementById('signup-error');
            const spinnerOverlay = document.getElementById('spinner-overlay');
            const submitButton = document.querySelector('button[type="submit"]');

            errorElement.textContent = '';

            if (password !== confirmPassword) {
                errorElement.textContent = 'Passwords do not match';
                return;
            }

            spinnerOverlay.style.display = 'flex';
            submitButton.disabled = true;

            try {
                // 1. Create user account
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // 2. Send verification email
                // await sendEmailVerification(user);

                // 3. Store additional user data in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    firstName: document.getElementById('first-name').value,
                    lastName: document.getElementById('last-name').value,
                    email: email,
                    phone: document.getElementById('phone').value,
                    studentId: document.getElementById('student_id').value,
                    session: document.getElementById('session').value,
                    gender: document.getElementById('gender').value,
                    createdAt: new Date(),
                    emailVerified: false
                });

                // 4. Show success message and redirect to login
                // alert('Registration successful! Please check your email to verify your account before logging in.');
                window.location.href = '/authentication/login/login.html';

            } catch (error) {
                console.error("Error signing up:", error);
                errorElement.textContent = error.message;
                alert("Signup failed: " + error.message);
            } finally {
                spinnerOverlay.style.display = 'none';
                submitButton.disabled = false;
            }
        });
    </script>
    <script src="common.js"></script>
</body>

</html>